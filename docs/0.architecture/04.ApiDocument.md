# E-ì»¤ë¨¸ìŠ¤ ì„œë¹„ìŠ¤ API ëª…ì„¸

**ğŸ“š ë¬¸ì„œ ëª©ë¡**

+ [1ï¸âƒ£ ìš”êµ¬ì‚¬í•­ ë¶„ì„ ë¬¸ì„œ](00.Requirements.md)
+ [2ï¸âƒ£ ë§ˆì¼ìŠ¤í†¤ ë¬¸ì„œ](01.Milestones.md)
+ 3ï¸âƒ£ ë‹¤ì´ì–´ê·¸ë¨ ë¬¸ì„œ
  + [ì‹œí€€ìŠ¤ ë‹¤ì´ì–´ê·¸ë¨ ë¬¸ì„œ](02-1.SequenceDiagram.md)
  + [ìƒíƒœ ë‹¤ì´ì–´ê·¸ë¨ ë¬¸ì„œ](02-2.StateDiagram.md)
+ [4ï¸âƒ£ ERD ë¬¸ì„œ](03.ERD.md)
+ [5ï¸âƒ£ API ëª…ì„¸](04.ApiDocument.md)

---

<!-- TOC -->
* [E-ì»¤ë¨¸ìŠ¤ ì„œë¹„ìŠ¤ API ëª…ì„¸](#e-ì»¤ë¨¸ìŠ¤-ì„œë¹„ìŠ¤-api-ëª…ì„¸)
  * [ì”ì•¡ API](#ì”ì•¡-api)
    * [ì”ì•¡ ì¡°íšŒ](#ì”ì•¡-ì¡°íšŒ)
    * [ì”ì•¡ ì¶©ì „](#ì”ì•¡-ì¶©ì „)
  * [ìƒí’ˆ API](#ìƒí’ˆ-api)
    * [ìƒí’ˆ ëª©ë¡ ì¡°íšŒ](#ìƒí’ˆ-ëª©ë¡-ì¡°íšŒ)
  * [ì¿ í° API](#ì¿ í°-api)
    * [ë³´ìœ  ì¿ í° ëª©ë¡ ì¡°íšŒ](#ë³´ìœ -ì¿ í°-ëª©ë¡-ì¡°íšŒ)
    * [ì¿ í° ë°œê¸‰](#ì¿ í°-ë°œê¸‰)
  * [ì£¼ë¬¸/ê²°ì œ API](#ì£¼ë¬¸ê²°ì œ-api)
    * [ì£¼ë¬¸ ìƒì„± ë° ê²°ì œ ì²˜ë¦¬](#ì£¼ë¬¸-ìƒì„±-ë°-ê²°ì œ-ì²˜ë¦¬)
  * [ìƒí’ˆ í†µê³„ API](#ìƒí’ˆ-í†µê³„-api)
    * [ìƒìœ„ ìƒí’ˆ ì¡°íšŒ](#ìƒìœ„-ìƒí’ˆ-ì¡°íšŒ)
<!-- TOC -->

ë³¸ ë¬¸ì„œëŠ” "E-ì»¤ë¨¸ìŠ¤ ìƒí’ˆ ì£¼ë¬¸ ì„œë¹„ìŠ¤"ì˜ REST API ì—”ë“œí¬ì¸íŠ¸, ìš”ì²­Â·ì‘ë‹µ í¬ë§·, ì£¼ìš” ì˜ˆì™¸ ë° ë¹„ì¦ˆë‹ˆìŠ¤ ê·œì¹™ì„ ì¼ê´„ ìˆ˜ë¡í•©ë‹ˆë‹¤.  
ê° ì„œë¹„ìŠ¤ ë„ë©”ì¸(ì”ì•¡, ìƒí’ˆ, ì¿ í°, ì£¼ë¬¸/ê²°ì œ, í†µê³„)ì— ëŒ€í•œ ì‹¤ë¬´ì  ì •ì±… ë° ë™ì‹œì„± ì´ìŠˆ ì˜ˆì™¸ì²˜ë¦¬ê¹Œì§€ ëª¨ë‘ í¬í•¨í•©ë‹ˆë‹¤.

---

## ì”ì•¡ API

### ì”ì•¡ ì¡°íšŒ

**[Description]**  
ì‚¬ìš©ì ì”ì•¡ì„ ì¡°íšŒí•œë‹¤.

**[Request]**

+ URL : `/api/v1/users/{id}/balance`
+ Method : `GET`
+ Path Parameters

| Parameter | Description |
|-----------|-------------|
| id        | ì‚¬ìš©ì ID      |

**[Response]**

+ Response

```json
{
  "code": 200,
  "message": "OK",
  "data": {
    "amount": 1000000
  }
}
```


+ Response Fields

| Path        | Type   | Description     |
|-------------|--------|----------------|
| code        | Number | ì‘ë‹µ ì½”ë“œ       |
| message     | String | ì‘ë‹µ ë©”ì‹œì§€      |
| data.amount | Number | ì‚¬ìš©ì ì”ì•¡(ì›)   |

+ ì˜ˆì™¸ ìƒí™©

| HTTP Status | code | message       | Description          |
|-------------|------|---------------|----------------------|
| 404         | 404  | Not Found     | ì‚¬ìš©ìê°€ ì¡´ì¬í•˜ì§€ ì•ŠìŒ |


### ì”ì•¡ ì¶©ì „

**[Description]**  
ì‚¬ìš©ì ì”ì•¡ì„ ì¶©ì „í•œë‹¤.

**[Request]**

+ URL : `/api/v1/users/{userId}/balance/charge`
+ Method : `POST`

+ Path Parameters

| Parameter | Type   | Description  |
|-----------|--------|--------------|
| userId    | Long   | ì‚¬ìš©ì ID     |

+ Request Body

```json
{
"amount": 10000
}
```

+ Request Fields

| Field  | Type   | Description      |
|--------|--------|------------------|
| amount | Number | ì¶©ì „í•  ê¸ˆì•¡(ì›)    |


**[Response]**

+ Response

```json
{
    "code": 200,
    "message": "ì”ì•¡ ì¶©ì „ì´ ì„±ê³µì ìœ¼ë¡œ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤.",
    "data": {
        "amount": 1010000
    }
}
```

+ Response Fields

| Path        | Type   | Description       |
|-------------|--------|------------------|
| code        | Number | ì‘ë‹µ ì½”ë“œ         |
| message     | String | ê²°ê³¼ ë©”ì‹œì§€        |
| data.amount | Number | ì¶©ì „ í›„ ì”ì•¡(ì›)    |

+ ì˜ˆì™¸ ìƒí™©

| HTTP Status | code | message                              | Description             |
|-------------|------|--------------------------------------|-------------------------|
| 404         | 404  | Not Found                            | ì‚¬ìš©ìê°€ ì¡´ì¬í•˜ì§€ ì•ŠìŒ     |
| 400         | 400  | ìµœëŒ€ ì”ì•¡ í•œë„ë¥¼ ì´ˆê³¼í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.  | ìµœëŒ€ í—ˆìš© ì”ì•¡ ì´ˆê³¼       |


## ìƒí’ˆ API

### ìƒí’ˆ ëª©ë¡ ì¡°íšŒ

**[Description]**  
íŒë§¤ ê°€ëŠ¥ ìƒí’ˆì˜ ëª©ë¡ê³¼ ê° ìƒí’ˆì˜ ì”ì—¬ ìˆ˜ëŸ‰ì„ ì¡°íšŒí•œë‹¤.

**[Request]**

+ URL : `/api/v1/products`
+ Method : `GET`

+ Query Parameters _(optional)_

| Parameter | Type   | Description           |
|-----------|--------|----------------------|
| status    | String | ìƒí’ˆ ìƒíƒœ í•„í„°(ì„ íƒ)   |

**[Response]**

+ Response

```json
{
    "code": 200,
    "message": "OK",
    "data": [
        {
            "productId": 1001,
            "name": "ì•„ë©”ë¦¬ì¹´ë…¸",
            "price": 4500,
            "status": "SELLABLE",
            "stock": 50
        },
        {
            "productId": 1002,
            "name": "ì¹´í˜ë¼ë–¼",
            "price": 4800,
            "status": "SELLABLE",
            "stock": 20
        }
    ]
}
```

+ Response Fields

| Path               | Type    | Description           |
|--------------------|---------|----------------------|
| code               | Number  | ì‘ë‹µ ì½”ë“œ             |
| message            | String  | ì‘ë‹µ ë©”ì‹œì§€           |
| data[].productId   | Number  | ìƒí’ˆ ID               |
| data[].name        | String  | ìƒí’ˆëª…                |
| data[].price       | Number  | ìƒí’ˆ ê°€ê²©             |
| data[].status      | String  | ìƒí’ˆ ìƒíƒœ(SELLABLE ë“±)|
| data[].stock       | Number  | ë‚¨ì€ ì¬ê³  ìˆ˜ëŸ‰        |

+ ì˜ˆì™¸ ìƒí™©

| HTTP Status | code | message            | Description         |
|-------------|------|--------------------|---------------------|
| 500         | 500  | Internal Error     | ì„œë²„ ì˜¤ë¥˜ ë°œìƒ         |

---

## ì¿ í° API

### ë³´ìœ  ì¿ í° ëª©ë¡ ì¡°íšŒ

**[Description]**  
ì‚¬ìš©ìê°€ ë³´ìœ í•œ(ë¯¸ì‚¬ìš©) ì¿ í° ëª©ë¡ì„ ì¡°íšŒí•œë‹¤.

**[Request]**

+ URL : `/api/v1/users/{userId}/coupons`
+ Method : `GET`

+ Path Parameters

| Parameter | Type   | Description  |
|-----------|--------|--------------|
| userId    | Long   | ì‚¬ìš©ì ID     |

**[Response]**

+ Response

```json
{
    "code": 200,
    "message": "OK",
    "data": [
        {
            "userCouponId": 701,
            "couponId": 501,
            "name": "ê°€ì…í™˜ì˜í• ì¸",
            "status": "AVAILABLE",
            "discountAmount": 5000,
            "expiredAt": "2025-06-30T23:59:59"
        }
    ]
}
```

+ Response Fields

| Path                     | Type    | Description            |
|--------------------------|---------|-----------------------|
| code                     | Number  | ì‘ë‹µ ì½”ë“œ              |
| message                  | String  | ì‘ë‹µ ë©”ì‹œì§€            |
| data[].userCouponId      | Number  | ì‚¬ìš©ìì¿ í° ID           |
| data[].couponId          | Number  | ì¿ í° ì •ì±… ID           |
| data[].name              | String  | ì¿ í°ëª…                 |
| data[].status            | String  | ì¿ í° ìƒíƒœ(AVAILABLE ë“±)|
| data[].discountAmount    | Number  | í• ì¸ ê¸ˆì•¡              |
| data[].expiredAt         | String  | ì¿ í° ë§Œë£Œì¼(ISO8601)   |

+ ì˜ˆì™¸ ìƒí™©

| HTTP Status | code | message       | Description          |
|-------------|------|---------------|----------------------|
| 404         | 404  | Not Found     | ì‚¬ìš©ìê°€ ì¡´ì¬í•˜ì§€ ì•ŠìŒ |

---

### ì¿ í° ë°œê¸‰

**[Description]**  
ì¿ í° ì •ì±…IDë¡œ ì„ ì°©ìˆœ ì¿ í° ë°œê¸‰ì„ ë°›ëŠ”ë‹¤.

**[Request]**

+ URL : `/api/v1/coupons/issue`
+ Method : `POST`

+ Request Body

```json
{
    "userId": 1,
    "couponId": 501
}
```

+ Request Fields

| Field    | Type   | Description      |
|----------|--------|------------------|
| userId   | Long   | ì‚¬ìš©ì ID         |
| couponId | Long   | ì¿ í° ì •ì±… ID      |

**[Response]**

+ Response

```json
{
    "code": 200,
    "message": "ì¿ í°ì´ ë°œê¸‰ë˜ì—ˆìŠµë‹ˆë‹¤.",
    "data": {
        "userCouponId": 702,
        "couponId": 501,
        "status": "AVAILABLE"
    }
}
```

+ Response Fields

| Path                | Type    | Description              |
|---------------------|---------|------------------------|
| code                | Number  | ì‘ë‹µ ì½”ë“œ                |
| message             | String  | ë©”ì‹œì§€                   |
| data.userCouponId   | Number  | ì‚¬ìš©ìì¿ í° ID             |
| data.couponId       | Number  | ì¿ í° ì •ì±… ID              |
| data.status         | String  | ë°œê¸‰ ìƒíƒœ(AVAILABLE ë“±)   |

+ ì˜ˆì™¸ ìƒí™©

| HTTP Status | code | message                         | Description               |
|-------------|------|---------------------------------|---------------------------|
| 404         | 404  | Not Found                       | ì‚¬ìš©ì/ì¿ í° ì •ì±… ì—†ìŒ      |
| 409         | 409  | ì´ë¯¸ ë°œê¸‰/ì„ ì°©ìˆœ ì†Œì§„/ë§Œë£Œ ë“±   | ì¤‘ë³µë°œê¸‰, ì†Œì§„, ë§Œë£Œ       |

---

## ì£¼ë¬¸/ê²°ì œ API

### ì£¼ë¬¸ ìƒì„± ë° ê²°ì œ ì²˜ë¦¬

**[Description]**  
ë³µìˆ˜ ìƒí’ˆ ì£¼ë¬¸ ë° ê²°ì œ(ì”ê³  ì°¨ê°Â·ì¬ê³  ì°¨ê°Â·ì¿ í° ì‚¬ìš© í¬í•¨)ë¥¼ íŠ¸ëœì­ì…˜ìœ¼ë¡œ ì²˜ë¦¬í•œë‹¤.

**[Request]**

+ URL : `/api/v1/orders`
+ Method : `POST`

+ Request Body

```json
{
    "userId": 1,
    "items": [
        { "productId": 1001, "quantity": 2 },
        { "productId": 1002, "quantity": 1 }
    ],
    "userCouponId": 702 // optional
}
```

+ Request Fields

| Field           | Type        | Description                   |
|-----------------|-------------|-------------------------------|
| userId          | Long        | ì‚¬ìš©ì ID                     |
| items           | Array       | ì£¼ë¬¸ ìƒí’ˆ ëª©ë¡                |
| items[].productId| Long       | ìƒí’ˆ ID                       |
| items[].quantity| Number      | êµ¬ë§¤ ìˆ˜ëŸ‰                     |
| userCouponId    | Long        | (Optional) ì‚¬ìš©ìì¿ í° ID       |

**[Response]**

+ Response

```json
{
    "code": 200,
    "message": "ì£¼ë¬¸ ë° ê²°ì œê°€ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤.",
    "data": {
    "orderId": 301,
    "status": "PAID",
    "totalAmount": 13800,
    "paidAmount": 8800,
    "discountAmount": 5000,
    "items": [
        { "productId": 1001, "quantity": 2, "price": 4500 },
        { "productId": 1002, "quantity": 1, "price": 4800 }
    ]
    }
}
```

+ Response Fields

| Path                  | Type    | Description      |
|-----------------------|---------|-----------------|
| code                  | Number  | ì‘ë‹µ ì½”ë“œ        |
| message               | String  | ê²°ê³¼ ë©”ì‹œì§€       |
| data.orderId          | Number  | ì£¼ë¬¸ ID          |
| data.status           | String  | ì£¼ë¬¸ ìƒíƒœ(PAID ë“±)|
| data.totalAmount      | Number  | ì´ ì£¼ë¬¸ê¸ˆì•¡       |
| data.paidAmount       | Number  | ì‹¤ì œ ê²°ì œ ê¸ˆì•¡    |
| data.discountAmount   | Number  | ì´ í• ì¸ ê¸ˆì•¡      |
| data.items[].productId| Number  | ìƒí’ˆ ID           |
| data.items[].quantity | Number  | ì£¼ë¬¸ ìˆ˜ëŸ‰         |
| data.items[].price    | Number  | ë‹¨ê°€              |

+ ì˜ˆì™¸ ìƒí™©

| HTTP Status | code | message                               | Description                  |
|-------------|------|---------------------------------------|------------------------------|
| 404         | 404  | Not Found                             | ì‚¬ìš©ì/ìƒí’ˆ/ì¿ í° ì—†ìŒ          |
| 400         | 400  | ì”ì•¡/ì¬ê³ /ì¿ í° ë¶ˆê°€ ë“±                 | ì”ì•¡/ì¬ê³  ë¶€ì¡±, ì¿ í° ë¶ˆê°€      |

+ ë¹„ê³   
- ë™ì‹œì„± íŠ¸ëœì­ì…˜(ì”ê³ /ì¬ê³ /ì¿ í° ì°¨ê° ë“±)ì€ ë°˜ë“œì‹œ ALL-OR-NOTHINGìœ¼ë¡œ ë³´ì¥ë˜ì–´ì•¼ í•¨.
- ê²°ì œ ì„±ê³µ ì‹œ ì£¼ë¬¸ì •ë³´ë¥¼ ì™¸ë¶€ ë°ì´í„°í”Œë«í¼ì— ë¹„ë™ê¸°ë¡œ ì „ì†¡í•¨.

---

## ìƒí’ˆ í†µê³„ API

### ìƒìœ„ ìƒí’ˆ ì¡°íšŒ

**[Description]**  
ìµœê·¼ 3ì¼ê°„ ê°€ì¥ ë§ì´ íŒ”ë¦° ìƒìœ„ 5ê°œ ìƒí’ˆì„ ì¡°íšŒí•œë‹¤.

**[Request]**

+ URL : `/api/v1/products/top`
+ Method : `GET`

**[Response]**

+ Response

```json
{
    "code": 200,
    "message": "OK",
    "data": [
        { "productId": 1001, "name": "ì•„ë©”ë¦¬ì¹´ë…¸", "salesCount": 257 },
        { "productId": 1002, "name": "ì¹´í˜ë¼ë–¼", "salesCount": 110 }
    ]
}
```

+ Response Fields

| Path               | Type    | Description    |
|--------------------|---------|---------------|
| code               | Number  | ì‘ë‹µ ì½”ë“œ       |
| message            | String  | ì‘ë‹µ ë©”ì‹œì§€      |
| data[].productId   | Number  | ìƒí’ˆ ID         |
| data[].name        | String  | ìƒí’ˆ ì´ë¦„        |
| data[].salesCount  | Number  | 3ì¼ê°„ íŒë§¤ ìˆ˜ëŸ‰  |

+ ì˜ˆì™¸ ìƒí™©

| HTTP Status | code | message            | Description           |
|-------------|------|--------------------|-----------------------|
| 500         | 500  | Internal Error     | í†µê³„ ë°ì´í„° ì§‘ê³„ ì‹¤íŒ¨   |


---

## ê³µí†µ ë¹„ì¦ˆë‹ˆìŠ¤ ë° ì˜ˆì™¸ ì²˜ë¦¬ ê·œì¹™

- ì‚¬ìš©ì/ìƒí’ˆ/ì¿ í° ë“± ëª¨ë“  ì™¸ë¶€ ì…ë ¥ì€ ì¡´ì¬ ë° ìœ íš¨ì„± ê²€ì¦ì„ ì„ í–‰.
- ì”ê³ , ì¬ê³ , ì¿ í° ë°œê¸‰Â·ì‚¬ìš© ë“± ë™ì‹œì„± ì¶©ëŒ ìƒí™©ì—ì„œ ë°ì´í„° ë¬´ê²°ì„± ë³´ì¥(ë‚™ê´€ì /ë¹„ê´€ì  ë½, DB íŠ¸ëœì­ì…˜ ë“± ì ìš©)
- ì˜¤ë¥˜ ì‘ë‹µ í‘œì¤€ ì˜ˆì‹œ
    ```
    { "error": "ì”ì•¡ì´ ë¶€ì¡±í•©ë‹ˆë‹¤." }
    { "error": "ìµœëŒ€ ì”ì•¡ í•œë„ë¥¼ ì´ˆê³¼í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤." }
    ```
- íŠ¸ëœì­ì…˜ ë‹¨ìœ„ë¡œ ì¼ê´€ì„± ë° Atomic ì²˜ë¦¬ ë³´ì¥.

---

**ì°¸ê³ :**  
- ìƒì„¸í•œ ë°ì´í„° íƒ€ì…, ì¸ì¦ ì²˜ë¦¬, ì‘ë‹µ í•„ë“œ ë“±ì€ ì„œë¹„ìŠ¤ ë‚´ë¶€ ì •ì±…, ì–¸ì–´ ë° í”„ë ˆì„ì›Œí¬ì— ë§ê²Œ ì¶”ê°€ ì •ì˜í•´ì•¼ í•©ë‹ˆë‹¤.
- ê° ê¸°ëŠ¥ë³„ ì—”í‹°í‹° êµ¬ì¡°, ìƒíƒœ/ìœ í˜•(enum, status type)ì€ ë„ë©”ì¸ ë‹¤ì´ì–´ê·¸ë¨ ë° ìƒíƒœ ë‹¤ì´ì–´ê·¸ë¨ ë¬¸ì„œ ì°¸ê³ .
